[{"id":"fab488d10bc34cea","type":"tab","label":"Flow 1","disabled":false,"info":"","env":[]},{"id":"56d6546b49429320","type":"group","z":"fab488d10bc34cea","name":"Forespørgsel til api.statbank.dk","style":{"label":true,"stroke":"none","fill":"#e3f3d3","fill-opacity":"0.5","color":"#7f7f7f"},"nodes":["dc4ed562af8c0c11","f907f702278244e6","3dbafb0399ce997b","48130d7525318156","32b450c086bd606d","7b7bda592abc184a"],"x":54,"y":55,"w":952,"h":166},{"id":"c9cf28feb76beb6e","type":"group","z":"fab488d10bc34cea","name":"Datavask og formattering","style":{"stroke":"none","fill":"#ffefbf","fill-opacity":"0.45","label":true,"color":"#7f7f7f"},"nodes":["6cfc02b7ba835b11","822115404514dd73","a06af2c5d8ad815d","601a23261b698cef","22384626a11906bc","d4708be78222811e"],"x":54,"y":279,"w":992,"h":122},{"id":"5c13e4731fd7f4cf","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false,"alpnprotocol":""},{"id":"dc4ed562af8c0c11","type":"inject","z":"fab488d10bc34cea","g":"56d6546b49429320","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":160,"y":120,"wires":[["3dbafb0399ce997b"]]},{"id":"f907f702278244e6","type":"http request","z":"fab488d10bc34cea","g":"56d6546b49429320","name":"","method":"POST","ret":"obj","paytoqs":"ignore","url":"https://api.statbank.dk/v1/data","tls":"5c13e4731fd7f4cf","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":690,"y":120,"wires":[["48130d7525318156"]]},{"id":"3dbafb0399ce997b","type":"template","z":"fab488d10bc34cea","g":"56d6546b49429320","name":"Forespørgsel på antal af eldrevene køretøjer\\n indregistreret i Randers Kommune 2018,\\n fordelt pr. måned","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"table\": \"BIL54\",\n\"format\": \"JSONSTAT\",\n\"variables\": [\n{\n\"code\": \"OMRÅDE\",\n\"values\": [\n\"730\"\n]\n},\n{\n\"code\": \"DRIV\",\n\"values\": [\n\"20225\"\n]\n},\n{\n\"code\": \"Tid\",\n\"values\": [\n\"2018M01\",\n\"2018M02\",\n\"2018M03\",\n\"2018M04\",\n\"2018M05\",\n\"2018M06\",\n\"2018M07\",\n\"2018M08\",\n\"2018M09\",\n\"2018M10\",\n\"2018M11\",\n\"2018M12\"\n]\n}\n]\n}","output":"json","x":430,"y":120,"wires":[["f907f702278244e6"]]},{"id":"48130d7525318156","type":"debug","z":"fab488d10bc34cea","g":"56d6546b49429320","name":"debug 1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":900,"y":120,"wires":[]},{"id":"32b450c086bd606d","type":"change","z":"fab488d10bc34cea","g":"56d6546b49429320","name":"","rules":[{"t":"set","p":"test","pt":"msg","to":"{\"dimension\":{\"OMRÅDE\":{\"label\":\"område\",\"category\":{\"index\":{\"730\":0},\"label\":{\"730\":\"Randers\"}}},\"DRIV\":{\"label\":\"drivmiddel\",\"category\":{\"index\":{\"20225\":0},\"label\":{\"20225\":\"El\"}}},\"ContentsCode\":{\"label\":\"Indhold\",\"category\":{\"index\":{\"BIL54\":0},\"label\":{\"BIL54\":\"Bestand af motorkøretøjer\"},\"unit\":{\"BIL54\":{\"base\":\"Antal\",\"decimals\":0}}}},\"Tid\":{\"label\":\"tid\",\"category\":{\"index\":{\"2018M01\":0,\"2018M02\":1,\"2018M03\":2,\"2018M04\":3,\"2018M05\":4,\"2018M06\":5,\"2018M07\":6,\"2018M08\":7,\"2018M09\":8,\"2018M10\":9,\"2018M11\":10,\"2018M12\":11},\"label\":{\"2018M01\":\"2018M01\",\"2018M02\":\"2018M02\",\"2018M03\":\"2018M03\",\"2018M04\":\"2018M04\",\"2018M05\":\"2018M05\",\"2018M06\":\"2018M06\",\"2018M07\":\"2018M07\",\"2018M08\":\"2018M08\",\"2018M09\":\"2018M09\",\"2018M10\":\"2018M10\",\"2018M11\":\"2018M11\",\"2018M12\":\"2018M12\"}}},\"id\":[\"OMRÅDE\",\"DRIV\",\"ContentsCode\",\"Tid\"],\"size\":[1,1,1,12],\"role\":{\"geo\":[\"OMRÅDE\"],\"metric\":[\"ContentsCode\"],\"time\":[\"Tid\"]}},\"label\":\"Bestand af motorkøretøjer efter område, drivmiddel, Indhold og tid\",\"source\":\"Danmarks Statistik\",\"updated\":\"2023-01-12T07:00:00Z\",\"value\":[97,98,98,100,97,98,101,104,107,103,103,110],\"extension\":{\"px\":{\"infofile\":\"https://www.dst.dk/statistikdokumentation/6345462f-02d1-4b4d-b241-1123b4aa0379\",\"tableid\":\"BIL54\",\"decimals\":0}}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":180,"wires":[["48130d7525318156"]]},{"id":"6cfc02b7ba835b11","type":"inject","z":"fab488d10bc34cea","g":"c9cf28feb76beb6e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":160,"y":340,"wires":[["a06af2c5d8ad815d"]]},{"id":"822115404514dd73","type":"debug","z":"fab488d10bc34cea","d":true,"g":"c9cf28feb76beb6e","name":"debug 2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":940,"y":320,"wires":[]},{"id":"7b7bda592abc184a","type":"template","z":"fab488d10bc34cea","g":"56d6546b49429320","name":"hardcoded request","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n   \"table\": \"BIL54\",\n   \"format\": \"CSV\",\n   \"valuePresentation\": \"CodeAndValue\",\n   \"variables\": [\n      {\n         \"code\": \"OMRÅDE\",\n         \"values\": [\n            \"730\"\n         ]\n      },\n      {\n         \"code\": \"BILTYPE\",\n         \"values\": [\n            \"4000100001\"\n         ]\n      },\n      {\n         \"code\": \"BRUG\",\n         \"values\": [\n            \"1000\"\n         ]\n      },\n      {\n         \"code\": \"DRIV\",\n         \"values\": [\n            \"20200\",\n            \"20225\"\n         ]\n      },\n      {\n         \"code\": \"Tid\",\n         \"values\": [\n            \"2018M01\",\n            \"2018M02\",\n            \"2018M03\",\n            \"2018M04\",\n            \"2018M05\",\n            \"2018M06\",\n            \"2018M07\",\n            \"2018M08\",\n            \"2018M09\",\n            \"2018M10\",\n            \"2018M11\",\n            \"2018M12\",\n            \"2019M01\",\n            \"2019M02\",\n            \"2019M03\",\n            \"2019M04\",\n            \"2019M05\",\n            \"2019M06\",\n            \"2019M07\",\n            \"2019M08\",\n            \"2019M09\",\n            \"2019M10\",\n            \"2019M11\",\n            \"2019M12\"\n         ]\n      }\n   ]\n}","output":"str","x":350,"y":180,"wires":[[]]},{"id":"a06af2c5d8ad815d","type":"template","z":"fab488d10bc34cea","g":"c9cf28feb76beb6e","name":"hardcoded test response","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"OMRÅDE;BILTYPE;BRUG;DRIV;TID;INDHOLD\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M01 2018M01;52600\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M02 2018M02;52711\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M03 2018M03;52838\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M04 2018M04;53025\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M05 2018M05;53214\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M06 2018M06;53340\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M07 2018M07;53328\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M08 2018M08;53642\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M09 2018M09;53589\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M10 2018M10;53498\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M11 2018M11;53434\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2018M12 2018M12;53460\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M01 2019M01;53588\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M02 2019M02;53608\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M03 2019M03;53893\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M04 2019M04;54021\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M05 2019M05;54150\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M06 2019M06;54272\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M07 2019M07;54306\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M08 2019M08;54465\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M09 2019M09;54515\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M10 2019M10;54500\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M11 2019M11;54526\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20200 Drivmidler i alt;2019M12 2019M12;54484\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M01 2018M01;97\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M02 2018M02;98\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M03 2018M03;98\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M04 2018M04;100\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M05 2018M05;97\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M06 2018M06;98\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M07 2018M07;101\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M08 2018M08;104\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M09 2018M09;107\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M10 2018M10;103\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M11 2018M11;103\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2018M12 2018M12;110\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M01 2019M01;124\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M02 2019M02;128\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M03 2019M03;134\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M04 2019M04;141\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M05 2019M05;141\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M06 2019M06;148\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M07 2019M07;148\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M08 2019M08;157\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M09 2019M09;165\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M10 2019M10;172\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M11 2019M11;178\n730 Randers;4000100001 Køretøjer i alt;1000 I alt;20225 El;2019M12 2019M12;186\n","output":"str","x":370,"y":340,"wires":[["601a23261b698cef"]]},{"id":"601a23261b698cef","type":"csv","z":"fab488d10bc34cea","g":"c9cf28feb76beb6e","name":"","sep":";","hdrin":true,"hdrout":"none","multi":"one","ret":"\\n","temp":"","skip":"0","strings":true,"include_empty_strings":"","include_null_values":"","x":590,"y":340,"wires":[["22384626a11906bc"]]},{"id":"22384626a11906bc","type":"change","z":"fab488d10bc34cea","g":"c9cf28feb76beb6e","name":"","rules":[{"t":"set","p":"result","pt":"msg","to":"{}","tot":"jsonata"},{"t":"set","p":"result.drivmiddel.navn","pt":"msg","to":"payload.DRIV","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":340,"wires":[["822115404514dd73","d4708be78222811e"]]},{"id":"d4708be78222811e","type":"debug","z":"fab488d10bc34cea","g":"c9cf28feb76beb6e","name":"result","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"result","targetType":"msg","statusVal":"","statusType":"auto","x":950,"y":360,"wires":[]},{"id":"31712bdf950531b4","type":"inject","z":"fab488d10bc34cea","name":"EXAMPLE","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":610,"y":460,"wires":[[]]}]